{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "73a8b4e1",
   "metadata": {},
   "source": [
    "# SPOTIFY\n",
    "### Group 1:\n",
    "Zachary Wilkerson, Tara Bode, Hank\n",
    "\n",
    "### Some things I want to know:\n",
    "- How many times did a track stay in the daily global top 200 list in 2021?\n",
    "- How many times did an artist stay in the daily global top 200 list in 2021?"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 129,
   "id": "2ef906c1",
   "metadata": {},
   "outputs": [],
   "source": [
    "import time\n",
    "from selenium import webdriver\n",
    "import pandas as pd\n",
    "\n",
    "driver = webdriver.Chrome(r'/Users/zwilkerson/Desktop/UF/ACG7849 - Web Crawling and Textual Analysis/selenium_files/chromedriver')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 130,
   "id": "ac3adadb",
   "metadata": {},
   "outputs": [],
   "source": [
    "driver.get(\"https://spotifycharts.com/regional/\")\n",
    "\n",
    "#top_charts = driver.find_element_by_class_name('chart-table').get_attribute(\"innerText\")\n",
    "#spotify_dict = {};\n",
    "# 'Song', 'Artist', 'Position', '# of Streams'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 131,
   "id": "16b84801",
   "metadata": {},
   "outputs": [],
   "source": [
    "#top_charts = driver.find_element_by_class_name('chart-table-track')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 133,
   "id": "f8e09898",
   "metadata": {},
   "outputs": [],
   "source": [
    "#driver.find_elements_by_xpath('//*[@id=\"content\"]/div/div/div/span/table/tbody/tr[2]/td[4]')\n",
    "#ranking = driver.find_elements_by_xpath('//*[@id=\"content\"]/div/div/div/span/table/tbody/tr/td[2]')\n",
    "#info = driver.find_elements_by_xpath('//*[@id=\"content\"]/div/div/div/span/table/tbody/tr/td[4]')\n",
    "#streams = driver.find_elements_by_xpath('//*[@id=\"content\"]/div/div/div/span/table/tbody/tr/td[5]')\n",
    "\n",
    "song_dict = {};\n",
    "artist_dict = {};\n",
    "\n",
    "#date_range = len(driver.find_element_by_xpath('//*[@id=\"content\"]/div/div/div/span/div[1]/div/div/div/div[3]/ul/li'))\n",
    "\n",
    "date_button = driver.find_element_by_xpath('//*[@id=\"content\"]/div/div/div/span/div[1]/div/div/div/div[3]')\n",
    "date_button.click()\n",
    "newdate_button = driver.find_element_by_xpath('//*[@id=\"content\"]/div/div/div/span/div[1]/div/div/div/div[3]/ul/li[1]')\n",
    "date = newdate_button.get_attribute('innerHTML');\n",
    "date_index = 1;\n",
    "\n",
    "#while re.search(r'[0-9]{2}/[0-9]{2}/2021',date):\n",
    "while re.search(r'05/[0-9]{2}/2021',date):\n",
    "    newdate_button.click()\n",
    "\n",
    "    ranking = driver.find_elements_by_xpath('//*[@id=\"content\"]/div/div/div/span/table/tbody/tr/td[2]')\n",
    "    info = driver.find_elements_by_xpath('//*[@id=\"content\"]/div/div/div/span/table/tbody/tr/td[4]')\n",
    "    streams = driver.find_elements_by_xpath('//*[@id=\"content\"]/div/div/div/span/table/tbody/tr/td[5]')\n",
    "\n",
    "    ranking_list = [];\n",
    "    song_list = [];\n",
    "    artist_list = [];\n",
    "    streams_list = [];\n",
    "\n",
    "    for item in range(len(ranking)):\n",
    "        ranking_list.append(ranking[item].text)\n",
    "        song_artist_split = info[item].text.split(' by ')\n",
    "        song_list.append(song_artist_split[0])\n",
    "        try:\n",
    "            song_dict[song_list[item]] += 1;\n",
    "        except:\n",
    "            song_dict[song_list[item]] = 1;\n",
    "        artist_list.append(song_artist_split[1])\n",
    "        try: \n",
    "            artist_dict[artist_list[item]] += 1;\n",
    "        except:\n",
    "            artist_dict[artist_list[item]] = 1;\n",
    "    #     song_list.append(info[item].text.split(' by')[0])\n",
    "    #     artists_list.append(info[item].text.split(' by ')[1])\n",
    "        streams_list.append(streams[item].text)\n",
    "    \n",
    "    date_index +=1;\n",
    "\n",
    "    date_button = driver.find_element_by_xpath('//*[@id=\"content\"]/div/div/div/span/div[1]/div/div/div/div[3]')\n",
    "    date_button.click()\n",
    "    newdate_button = driver.find_element_by_xpath('//*[@id=\"content\"]/div/div/div/span/div[1]/div/div/div/div[3]/ul/li['+str(date_index)+']')\n",
    "    date = newdate_button.get_attribute('innerHTML');\n",
    "\n",
    "date_button.click()\n",
    "driver.close()\n",
    "\n",
    "#print(song_dict)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 134,
   "id": "bbf26ab2",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "['Billie Eilish', 'Justin Bieber', 'Dua Lipa', 'The Weeknd', 'Harry Styles']"
      ]
     },
     "execution_count": 134,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "sorted(artist_dict, key=artist_dict.get, reverse=True)[:5]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 135,
   "id": "7fa9e273",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{'Lil Nas X': 24,\n",
       " 'Justin Bieber': 60,\n",
       " 'Doja Cat': 24,\n",
       " 'Dua Lipa': 60,\n",
       " 'Masked Wolf': 12,\n",
       " 'Bruno Mars, Anderson .Paak, Silk Sonic': 12,\n",
       " 'Polo G': 24,\n",
       " 'Los Legendarios, Wisin, Jhay Cortez': 12,\n",
       " 'Sebastian Yatra, Myke Towers': 12,\n",
       " 'The Weeknd': 48,\n",
       " 'Billie Eilish': 64,\n",
       " 'Olivia Rodrigo': 24,\n",
       " 'Tion Wayne, Russ Millions': 12,\n",
       " 'Nio Garcia, Flow La Movie': 12,\n",
       " 'Riton, Nightcrawlers': 12,\n",
       " 'Giveon': 12,\n",
       " 'Kali Uchis': 12,\n",
       " 'Tiësto': 12,\n",
       " 'Trippie Redd': 6,\n",
       " 'Gera MX, Christian Nodal': 12,\n",
       " 'Bad Bunny, Jhay Cortez': 12,\n",
       " 'AURORA': 12,\n",
       " 'J. Cole': 14,\n",
       " 'Cardi B': 24,\n",
       " '24kGoldn': 12,\n",
       " 'ATB, Topic, A7S': 12,\n",
       " 'Glass Animals': 12,\n",
       " 'Duncan Laurence': 12,\n",
       " 'Harry Styles': 46,\n",
       " 'Maroon 5': 24,\n",
       " 'KAROL G, Mariah Angeliq': 12,\n",
       " 'Travis Scott, HVME': 12,\n",
       " 'Myke Towers, Juhn': 12,\n",
       " 'BTS': 13,\n",
       " 'Joel Corry, RAYE, David Guetta': 12,\n",
       " 'Lewis Capaldi': 24,\n",
       " 'Coldplay': 18,\n",
       " 'Sech': 12,\n",
       " 'Bad Bunny, ROSALÍA': 12,\n",
       " 'Joel Corry': 12,\n",
       " 'The Kid LAROI': 24,\n",
       " 'Bruno Mars': 24,\n",
       " 'Lil Tjay, 6LACK': 12,\n",
       " 'Majestic, Boney M.': 12,\n",
       " 'Ariana Grande': 41,\n",
       " 'The Neighbourhood': 24,\n",
       " 'Drake': 36,\n",
       " 'P!nk, Willow Sage Hart': 12,\n",
       " 'MEDUZA': 12,\n",
       " 'Selena Gomez': 12,\n",
       " 'SZA': 12,\n",
       " 'Saweetie': 12,\n",
       " 'Tones And I': 12,\n",
       " 'Internet Money': 12,\n",
       " 'DaBaby': 12,\n",
       " 'Nathan Evans': 12,\n",
       " 'SAINt JHN': 12,\n",
       " 'Boza': 12,\n",
       " 'Rauw Alejandro, Mr. Naisgai': 6,\n",
       " 'Tate McRae': 12,\n",
       " 'StarBoi3': 11,\n",
       " 'Tom Odell': 12,\n",
       " 'Rochy RD, Myke Towers, Nicki Nicole': 12,\n",
       " 'Lil Tecca': 7,\n",
       " 'Ava Max': 12,\n",
       " 'TINI, Maria Becerra': 12,\n",
       " 'Post Malone': 12,\n",
       " 'Imagine Dragons': 24,\n",
       " 'Travis Scott': 36,\n",
       " 'Surf Curse': 11,\n",
       " 'CJ': 12,\n",
       " 'Lady Gaga, Bradley Cooper': 12,\n",
       " 'Conan Gray': 12,\n",
       " 'ITZY': 12,\n",
       " 'Ofenbach': 12,\n",
       " 'Mora, Jhay Cortez': 12,\n",
       " 'Miley Cyrus': 12,\n",
       " 'Mc Davi, Mc Pedrinho, Mc Don Juan': 7,\n",
       " 'Rauw Alejandro, Anuel AA': 12,\n",
       " 'Post Malone, Swae Lee': 12,\n",
       " 'Pop Smoke': 36,\n",
       " 'Young Stoner Life, Young Thug, Gunna': 12,\n",
       " 'Black Eyed Peas, Shakira': 12,\n",
       " 'DJ Khaled': 38,\n",
       " 'Ed Sheeran': 24,\n",
       " 'Maluma': 12,\n",
       " 'Shawn Mendes, Camila Cabello': 12,\n",
       " 'Hozier': 12,\n",
       " 'Bizarrap, Snow Tha Product': 12,\n",
       " 'Juice WRLD': 42,\n",
       " 'Topic, A7S': 12,\n",
       " 'James Arthur': 19,\n",
       " 'Powfu, beabadoobee': 12,\n",
       " 'Lovejoy': 2,\n",
       " 'Maluma, Beéle, Rauw Alejandro, Mambo Kingz, DJ Luian, Darell': 12,\n",
       " 'Dj Guuga, DJ Ivis': 12,\n",
       " 'Ashnikko': 12,\n",
       " 'Israel & Rodolffo': 12,\n",
       " 'OneRepublic': 18,\n",
       " 'Regard, Troye Sivan, Tate McRae': 12,\n",
       " 'Queen': 24,\n",
       " 'Fleetwood Mac': 12,\n",
       " 'Lil Tjay': 19,\n",
       " 'Avicii': 24,\n",
       " 'John Legend': 12,\n",
       " 'Russ Millions, Tion Wayne': 12,\n",
       " 'KAROL G': 12,\n",
       " 'Regard': 12,\n",
       " 'Jawsh 685, Jason Derulo': 12,\n",
       " 'Roddy Ricch': 12,\n",
       " 'J Balvin, Dua Lipa, Bad Bunny': 12,\n",
       " 'Tom Grennan': 11,\n",
       " 'Beach Bunny': 12,\n",
       " 'Machine Gun Kelly': 18,\n",
       " 'Vance Joy': 12,\n",
       " 'Lady Gaga': 12,\n",
       " 'Nio Garcia, Casper Magico, Ozuna, Wisin & Yandel, Myke Towers, Flow La Movie': 12,\n",
       " 'Bad Bunny': 12,\n",
       " 'Joyner Lucas, Lil Baby': 10,\n",
       " 'Gotye, Kimbra': 12,\n",
       " 'Manuel Turizo, Rauw Alejandro, Myke Towers': 12,\n",
       " 'XXXTENTACION': 15,\n",
       " 'Milly, Farruko, Nio Garcia, Jay Wheeler, Amenazzy': 12,\n",
       " 'The Chainsmokers, Halsey': 12,\n",
       " 'The Police': 12,\n",
       " 'Arctic Monkeys': 12,\n",
       " 'Lil Mosey': 12,\n",
       " 'Nirvana': 11,\n",
       " 'The Chainsmokers, Coldplay': 6,\n",
       " 'Macklemore & Ryan Lewis': 10,\n",
       " 'MARINA': 12,\n",
       " 'JP Saxe': 8,\n",
       " 'Eminem': 18,\n",
       " 'Crissin, Totoy El Frio, Natan & Shander': 3,\n",
       " 'MC Kevin o Chris': 6,\n",
       " 'Future': 12,\n",
       " 'Gym Class Heroes': 24,\n",
       " 'Drake, WizKid, Kyla': 3,\n",
       " 'Pink Sweat$': 11,\n",
       " 'The Killers': 12,\n",
       " 'Alok, Mc Don Juan, Dj GBR': 12,\n",
       " 'Daddy Yankee': 5,\n",
       " 'Malu, DJ Lucas Beat': 12,\n",
       " '187 Strassenbande, Bonez MC, Frauenarzt': 5,\n",
       " 'ElyOtto': 9,\n",
       " 'Linkin Park': 1,\n",
       " 'Myke Towers': 6,\n",
       " 'NCT DREAM': 1,\n",
       " 'Don Toliver': 4,\n",
       " 'Taylor Swift': 8,\n",
       " 'Bizarrap, L-Gante': 11,\n",
       " 'Nicky Jam, Romeo Santos': 9,\n",
       " 'Shawn Mendes': 5,\n",
       " 'Os Barões Da Pisadinha': 4,\n",
       " 'Raí Saia Rodada': 5,\n",
       " 'Jorge & Mateus': 5,\n",
       " 'Diego & Victor Hugo, Bruno & Marrone': 4,\n",
       " 'Wesley Safadão, Os Barões Da Pisadinha': 4,\n",
       " 'Fernando & Sorocaba, Tarcísio do Acordeon': 4,\n",
       " 'Xand Avião, DJ Ivis, Mc Danny': 4,\n",
       " 'a-ha': 4,\n",
       " 'Mc Poze do Rodo, Neo Beats, Mainstreet': 4,\n",
       " 'DJ Ivis': 2,\n",
       " 'Alex Rose, Rauw Alejandro': 2,\n",
       " 'Camilo, Evaluna Montaner': 8,\n",
       " 'Wisin, Myke Towers, Los Legendarios': 3,\n",
       " 'Ozuna': 1,\n",
       " 'P!nk': 1,\n",
       " 'Luciano, Lil Zey': 1,\n",
       " 'David Guetta': 1,\n",
       " 'Baby Keem': 6,\n",
       " 'ROSÉ': 6,\n",
       " 'Twenty One Pilots': 11,\n",
       " 'Pooh Shiesty': 6,\n",
       " 'J Balvin, Khalid': 5,\n",
       " 'Demi Lovato': 5,\n",
       " 'Sia, David Guetta': 1,\n",
       " 'Lord Huron': 2,\n",
       " 'Ritt Momney': 1,\n",
       " 'Anitta': 3,\n",
       " 'Trevor Daniel': 1,\n",
       " 'Th CDM': 1,\n",
       " 'Hugo & Guilherme': 1,\n",
       " 'Oasis': 1,\n",
       " 'Queen, David Bowie': 1}"
      ]
     },
     "execution_count": 135,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "artist_dict"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 52,
   "id": "67ea43bc",
   "metadata": {},
   "outputs": [],
   "source": [
    "## CLICK BUTTON TO CHANGE DATE\n",
    "## BUTTON XPATH: //*[@id=\"content\"]/div/div/div/span/div[1]/div/div/div/div[3]\n",
    "date_button = driver.find_element_by_xpath('//*[@id=\"content\"]/div/div/div/span/div[1]/div/div/div/div[3]')\n",
    "date_button.click()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 53,
   "id": "846f265b",
   "metadata": {},
   "outputs": [],
   "source": [
    "newdate_button = driver.find_element_by_xpath('//*[@id=\"content\"]/div/div/div/span/div[1]/div/div/div/div[3]/ul/li[2]')\n",
    "newdate_button.click()\n",
    "\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 55,
   "id": "d316808b",
   "metadata": {},
   "outputs": [],
   "source": [
    "for date in range(10):\n",
    "    date_button = driver.find_element_by_xpath('//*[@id=\"content\"]/div/div/div/span/div[1]/div/div/div/div[3]')\n",
    "    date_button.click()\n",
    "    time.sleep(2)\n",
    "    newdate_button = driver.find_element_by_xpath('//*[@id=\"content\"]/div/div/div/span/div[1]/div/div/div/div[3]/ul/li['+str(date+1)+']')\n",
    "    newdate_button.click()\n",
    "    \n",
    "    \n",
    "sorted(A, key=A.get, reverse=True)[:5]\n",
    "\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "6c3849d1",
   "metadata": {},
   "source": [
    "# FANDANGO"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 76,
   "id": "8e0c1e79",
   "metadata": {},
   "outputs": [],
   "source": [
    "import regex as re"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 88,
   "id": "8f94601b",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Match\n"
     ]
    }
   ],
   "source": [
    "if re.search(r'[0-9]{2}/[0-9]{2}/2021','10/10/2021'):\n",
    "    print('Match')\n",
    "else: \n",
    "    print('No Match')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "af80fe30",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}

